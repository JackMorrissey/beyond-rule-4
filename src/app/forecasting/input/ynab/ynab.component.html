<form [formGroup]="budgetForm">

  <div class="form-group row">
    <label for="netWorth" class="col-sm-12 col-md-4 col-form-label">Net Worth</label>
    <div class="col">
      <input type="number" class="form-control" id="netWorth" formControlName="netWorth">
    </div>
  </div>
  <div class="form-group row">
    <label for="monthlyContribution" class="col-sm-12 col-md-4 col-form-label">Monthly Contribution</label>
    <div class="col">
      <input type="number" class="form-control" id="monthlyContribution" formControlName="monthlyContribution">
    </div>
  </div>

  <table class="table">
    <thead class="thead-light">
      <tr>
        <th>Calculated</th>
        <th>YNAB</th>
        <th>FI</th>
        <th>Lean FI</th>
      </tr>
    </thead>
    <tbody >
      <tr>
        <th>Monthly Expenses</th>
        <td>{{expenses.ynab.monthly | number}}</td>
        <td>{{expenses.fi.monthly | number}}</td>
        <td>{{expenses.leanFi.monthly | number}}</td>
      </tr>
      <tr>
        <th>Estimated Annual Expenses</th>
        <td>{{expenses.ynab.annual | number}}</td>
        <td>{{expenses.fi.annual | number}}</td>
        <td>{{expenses.leanFi.annual | number}}</td>
      </tr>
    </tbody>
    <thead class="thead-light">
      <tr>
        <th>Category</th>
        <th>YNAB Budget</th>
        <th>FI Budget</th>
        <th>Lean FI Budget</th>
      </tr>
    </thead>
    <tbody formArrayName="categoryGroups">
    <ng-container *ngFor="let categoryGroup of categoryGroups.controls; let i=index" [formGroupName]="i">
      <tr>
        <th colspan="4">{{categoryGroup.value.name}}</th>
      </tr>
      <ng-container formArrayName="categories">
        <tr *ngFor="let category of categoryGroup.get('categories').controls; let j=index" [formGroupName]="j">
          <td>{{category.value.name}}</td>
          <td>{{category.value.retrievedBudgeted}}</td>
          <td>
            <input class="form-control" formControlName="fiBudget" type="number" />
          </td>
          <td>
              <input class="form-control" formControlName="leanFiBudget" type="number" />
            </td>
        </tr>
      </ng-container>
    </ng-container>
    </tbody>
  </table>
</form>
